Version 4
SHEET 1 21804 10420
WIRE 18208 3360 16576 3360
WIRE 18416 3360 18208 3360
WIRE 18512 3360 18416 3360
WIRE 19184 3360 18512 3360
WIRE 19408 3360 19184 3360
WIRE 19824 3360 19408 3360
WIRE 19920 3360 19824 3360
WIRE 18512 3424 18512 3360
WIRE 19408 3424 19408 3360
WIRE 19920 3424 19920 3360
WIRE 18208 3440 18208 3360
WIRE 16912 3472 16832 3472
WIRE 17120 3472 16992 3472
WIRE 17424 3472 17120 3472
WIRE 17728 3504 17616 3504
WIRE 18000 3504 17728 3504
WIRE 18000 3568 18000 3504
WIRE 16832 3600 16832 3472
WIRE 17120 3600 17120 3472
WIRE 17424 3600 17424 3472
WIRE 18512 3616 18512 3488
WIRE 18624 3616 18512 3616
WIRE 18816 3616 18688 3616
WIRE 19232 3616 19104 3616
WIRE 19408 3616 19408 3488
WIRE 19408 3616 19296 3616
WIRE 19920 3616 19920 3488
WIRE 20032 3616 19920 3616
WIRE 20224 3616 20096 3616
WIRE 18208 3632 18208 3520
WIRE 18816 3696 18816 3616
WIRE 19104 3696 19104 3616
WIRE 20224 3696 20224 3616
WIRE 16576 3712 16576 3360
WIRE 17744 3712 17616 3712
WIRE 18000 3712 18000 3648
WIRE 18000 3712 17744 3712
WIRE 19920 3760 19920 3616
WIRE 16832 3792 16832 3680
WIRE 17120 3792 17120 3664
WIRE 19184 3808 19184 3360
WIRE 16576 3856 16576 3776
WIRE 18272 3872 18224 3872
WIRE 18416 3872 18416 3360
WIRE 18416 3872 18352 3872
WIRE 19680 3872 19632 3872
WIRE 19824 3872 19824 3360
WIRE 19824 3872 19760 3872
WIRE 19920 3904 19920 3840
WIRE 20128 3904 19920 3904
WIRE 20288 3904 20192 3904
WIRE 20416 3904 20288 3904
WIRE 20416 3968 20416 3904
WIRE 18512 4000 18512 3616
WIRE 19408 4000 19408 3616
WIRE 19920 4000 19920 3904
WIRE 18656 4016 18656 3952
WIRE 19072 4016 19072 3952
WIRE 16576 4032 16576 3920
WIRE 16576 4032 16400 4032
WIRE 17424 4048 17424 3680
WIRE 17424 4048 17168 4048
WIRE 17664 4048 17424 4048
WIRE 18000 4048 18000 3712
WIRE 18000 4048 17728 4048
WIRE 18112 4048 18000 4048
WIRE 18224 4048 18224 3872
WIRE 18224 4048 18176 4048
WIRE 18272 4048 18224 4048
WIRE 18448 4048 18352 4048
WIRE 19184 4048 19184 3888
WIRE 19232 4048 19184 4048
WIRE 19344 4048 19312 4048
WIRE 19632 4048 19632 3872
WIRE 19680 4048 19632 4048
WIRE 19856 4048 19760 4048
WIRE 16400 4096 16400 4032
WIRE 16576 4096 16576 4032
WIRE 18000 4128 18000 4048
WIRE 20416 4144 20416 4048
WIRE 19408 4160 19408 4096
WIRE 19408 4160 19296 4160
WIRE 19488 4160 19408 4160
WIRE 19632 4160 19632 4048
WIRE 19632 4160 19552 4160
WIRE 18512 4176 18512 4096
WIRE 18656 4176 18656 4080
WIRE 18656 4176 18512 4176
WIRE 18720 4176 18656 4176
WIRE 18800 4176 18784 4176
WIRE 18912 4176 18880 4176
WIRE 19072 4176 19072 4080
WIRE 19072 4176 18992 4176
WIRE 19136 4176 19072 4176
WIRE 19184 4176 19184 4048
WIRE 19184 4176 19136 4176
WIRE 19920 4176 19920 4096
WIRE 20128 4176 19920 4176
WIRE 20288 4176 20192 4176
WIRE 20416 4176 20288 4176
WIRE 21248 4208 20944 4208
WIRE 21776 4208 21472 4208
WIRE 16576 4224 16576 4176
WIRE 16752 4224 16576 4224
WIRE 18512 4240 18512 4176
WIRE 19296 4240 19296 4160
WIRE 19408 4240 19408 4160
WIRE 19920 4240 19920 4176
WIRE 20416 4240 20416 4176
WIRE 19136 4272 19136 4176
WIRE 16576 4288 16576 4224
WIRE 17168 4288 17168 4048
WIRE 18000 4320 18000 4208
WIRE 16400 4336 16400 4176
WIRE 16512 4336 16400 4336
WIRE 16752 4336 16752 4224
WIRE 16928 4336 16752 4336
WIRE 17104 4336 17008 4336
WIRE 16400 4400 16400 4336
WIRE 19296 4400 19296 4304
WIRE 18512 4416 18512 4320
WIRE 19136 4416 19136 4336
WIRE 19296 4416 19296 4400
WIRE 19408 4416 19408 4320
WIRE 19920 4416 19920 4320
WIRE 20416 4416 20416 4320
WIRE 16016 4448 15936 4448
WIRE 16224 4448 16096 4448
WIRE 16336 4448 16304 4448
WIRE 20944 4464 20944 4208
WIRE 21472 4464 21472 4208
WIRE 18000 4496 18000 4400
WIRE 16400 4560 16400 4496
WIRE 16576 4560 16576 4384
WIRE 16576 4560 16400 4560
WIRE 15936 4576 15936 4448
WIRE 16576 4608 16576 4560
WIRE 20944 4672 20944 4544
WIRE 21472 4672 21472 4544
WIRE 15936 4752 15936 4656
WIRE 16576 4816 16576 4688
WIRE 17168 4816 17168 4384
WIRE 17072 5200 16592 5200
WIRE 17072 5344 17072 5200
WIRE 16592 5360 16592 5200
WIRE 16592 5552 16592 5440
WIRE 17072 5568 17072 5408
WIRE 16752 5616 16752 4336
WIRE 16864 5616 16752 5616
WIRE 17008 5616 16944 5616
WIRE 17072 5744 17072 5664
WIRE 17536 5744 17072 5744
WIRE 17072 5808 17072 5744
WIRE 17072 5984 17072 5888
FLAG 15936 4752 0
FLAG 16576 4816 0
FLAG 17168 4816 0
FLAG 17120 3792 0
FLAG 18000 4496 0
FLAG 19920 4416 0
FLAG 20416 4416 0
FLAG 18208 3632 0
FLAG 20416 4144 0
FLAG 16592 5552 0
FLAG 17072 5984 0
FLAG 17744 3712 ADC_tail_check
FLAG 17728 3504 GPIO_tail_check
FLAG 20224 3696 0
FLAG 16832 3792 0
FLAG 20944 4672 0
FLAG 18512 4416 0
FLAG 18816 3696 0
FLAG 19136 4416 0
FLAG 19072 3952 LPF
FLAG 21472 4672 0
FLAG 19408 4416 0
FLAG 19104 3696 0
FLAG 19296 4400 LPF2
FLAG 18656 3952 buf
FLAG 20288 4176 vout
FLAG 20288 3904 pout
SYMBOL voltage 15936 4560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 2 3.5n 10n 100n 100u)
SYMBOL BFU760F 16544 4336 R0
WINDOW 0 -18 -46 Bottom 2
WINDOW 3 47 1 VTop 2
SYMATTR InstName U2
SYMBOL res 16560 4592 R0
SYMATTR InstName R4
SYMATTR Value 5
SYMBOL res 16560 4080 R0
SYMATTR InstName R5
SYMATTR Value 50
SYMBOL BFU760F 16368 4448 R0
WINDOW 0 -18 -46 Bottom 2
WINDOW 3 47 1 VTop 2
SYMATTR InstName U3
SYMBOL res 16384 4080 R0
SYMATTR InstName R6
SYMATTR Value 470
SYMBOL res 16320 4432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL res 17024 4320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 220
SYMBOL BFU760F 17136 4336 R0
WINDOW 0 -18 -46 Bottom 2
WINDOW 3 47 1 VTop 2
SYMATTR InstName U4
SYMBOL res 16112 4432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL res 17008 3456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL cap 17104 3600 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL cap 17728 4032 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100p
SYMBOL res 17984 4304 R0
SYMATTR InstName R11
SYMATTR Value {r_tail}
SYMBOL res 19776 4032 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL BFU760F 19888 4048 R0
WINDOW 0 -18 -46 Bottom 2
WINDOW 3 47 1 VTop 2
SYMATTR InstName U5
SYMBOL cap 18176 4032 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL res 19776 3856 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 19904 4224 R0
SYMATTR InstName R14
SYMATTR Value 33
SYMBOL res 20400 4224 R0
SYMATTR InstName R15
SYMATTR Value 50
SYMBOL cap 20192 4160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL voltage 18208 3424 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 3.3
SYMBOL res 17440 3696 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL res 19904 3744 R0
SYMATTR InstName R18
SYMATTR Value 33
SYMBOL res 20400 3952 R0
SYMATTR InstName R19
SYMATTR Value 50
SYMBOL cap 20192 3888 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL diode 19904 3424 R0
SYMATTR InstName D1
SYMATTR Value 1n4148
SYMBOL diode 16560 3856 R0
SYMATTR InstName D3
SYMATTR Value 1n4148
SYMBOL diode 16560 3712 R0
SYMATTR InstName D4
SYMATTR Value 1n4148
SYMBOL res 17984 4112 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL voltage 16592 5344 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL BFU760F 17040 5616 R0
WINDOW 0 -18 -46 Bottom 2
WINDOW 3 47 1 VTop 2
SYMATTR InstName U1
SYMBOL res 17056 5792 R0
SYMATTR InstName R2
SYMATTR Value 470
SYMBOL diode 17056 5344 R0
SYMATTR InstName D5
SYMATTR Value 1n4148
SYMBOL res 16960 5600 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 2.2k
SYMBOL res 17984 3552 R0
SYMATTR InstName R17
SYMATTR Value 470
SYMBOL cap 20096 3600 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL voltage 16832 3584 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 1
SYMBOL bv 20944 4448 R0
SYMATTR InstName B1
SYMATTR Value V=idt(V(ADC_tail_check))
SYMBOL res 18368 4032 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1k
SYMBOL BFU760F 18480 4048 R0
WINDOW 0 -18 -46 Bottom 2
WINDOW 3 47 1 VTop 2
SYMATTR InstName U6
SYMBOL res 18368 3856 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL res 18496 4224 R0
SYMATTR InstName R22
SYMATTR Value 50
SYMBOL cap 18784 4160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 10µ
SYMBOL diode 18496 3424 R0
SYMATTR InstName D2
SYMATTR Value 1n4148
SYMBOL cap 18688 3600 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 100n
SYMBOL res 19008 4160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value {r_rise}
SYMBOL cap 19152 4336 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C8
SYMATTR Value 10p
SYMBOL res 18896 4160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 27
SYMBOL bv 21472 4448 R0
SYMATTR InstName B2
SYMATTR Value V=idt(V(LPF))
SYMBOL cap 19088 4080 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C10
SYMATTR Value 100n
SYMBOL BFU760F 19376 4048 R0
WINDOW 0 -18 -46 Bottom 2
WINDOW 3 47 1 VTop 2
SYMATTR InstName U7
SYMBOL res 19392 4224 R0
SYMATTR InstName R25
SYMATTR Value 100
SYMBOL diode 19392 3424 R0
SYMATTR InstName D6
SYMATTR Value 1n4148
SYMBOL cap 19232 3600 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 100n
SYMBOL res 19328 4032 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 1k
SYMBOL res 19200 3904 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R27
SYMATTR Value 47k
SYMBOL cap 19312 4304 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C12
SYMATTR Value 100n
SYMBOL cap 19552 4144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 10µ
SYMBOL cap 18672 4080 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C14
SYMATTR Value 100n
TEXT 17488 4872 Left 2 !.include standard.bjt\n.include standard_2.bjt
TEXT 17480 4664 Left 6 ;TRAN CMD
TEXT 16000 3768 Left 2 ;.step param delay 0 7u 2u
TEXT 17072 3400 Left 6 ;The "DAC"
TEXT 16008 3824 Left 2 !.param delay=50u
TEXT 18088 4400 Left 2 ;1k Multiturn
TEXT 17520 5672 Left 2 ;1V pos trigger
TEXT 17632 3544 Left 2 ;either VCC or HiZ
TEXT 17704 4224 Left 2 ;.param r 100k
TEXT 18592 4352 Left 2 ;.step param r_rise list 0.1 10 100 330 1k
TEXT 18056 4504 Left 2 ;.param r_tail 100
TEXT 18264 4864 Left 2 !.include trancmd.txt\n.include param.txt
TEXT 17992 4672 Left 2 !.tran 0 {transtop} {transtart} {timestep}
